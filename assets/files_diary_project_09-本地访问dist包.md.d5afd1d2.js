import{_ as s,o as a,c as n,O as e}from"./chunks/framework.999b5480.js";const h=JSON.parse('{"title":"访问dist包","description":"","frontmatter":{},"headers":[],"relativePath":"files/diary/project/09-本地访问dist包.md","filePath":"files/diary/project/09-本地访问dist包.md","lastUpdated":1720437757000}'),o={name:"files/diary/project/09-本地访问dist包.md"},l=e(`<h1 id="访问dist包" tabindex="-1">访问dist包 <a class="header-anchor" href="#访问dist包" aria-label="Permalink to &quot;访问dist包&quot;">​</a></h1><h2 id="本地启动服务" tabindex="-1">本地启动服务 <a class="header-anchor" href="#本地启动服务" aria-label="Permalink to &quot;本地启动服务&quot;">​</a></h2><h3 id="使用serve" tabindex="-1">使用serve <a class="header-anchor" href="#使用serve" aria-label="Permalink to &quot;使用serve&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">serve</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5666</span></span></code></pre></div><h3 id="serve-配置" tabindex="-1"><strong>Serve 配置</strong> <a class="header-anchor" href="#serve-配置" aria-label="Permalink to &quot;**Serve 配置**&quot;">​</a></h3><p>创建一个 <code>.servedrc</code> 或 <code>.servrc.json</code> 文件，指定配置参数。</p><p>使用 <code>&quot;rewrites&quot;</code> 属性将 <code>/xxx/</code> 下的请求映射到根目录</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">public</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">rewrites</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">source</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/xxx/:splat*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">destination</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/:splat*</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="启动-serve" tabindex="-1"><strong>启动 Serve：</strong> <a class="header-anchor" href="#启动-serve" aria-label="Permalink to &quot;**启动 Serve：**&quot;">​</a></h3><p>使用以下命令启动 <code>Serve</code>，并指定配置文件：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">serve</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dist/.servedrc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5666</span></span></code></pre></div><h3 id="访问" tabindex="-1">访问 <a class="header-anchor" href="#访问" aria-label="Permalink to &quot;访问&quot;">​</a></h3><p>启动成功后通过 \`\`<a href="http://localhost:5666/xxx/%60" target="_blank" rel="noreferrer">http://localhost:5666/xxx/\`</a> 访问项目</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Local:</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">http://localhost:5666</span></span></code></pre></div><h3 id="使用-http-serve" tabindex="-1">使用 http-serve <a class="header-anchor" href="#使用-http-serve" aria-label="Permalink to &quot;使用 http-serve&quot;">​</a></h3><h2 id="通过测试-正式域名访问" tabindex="-1">通过测试/正式域名访问 <a class="header-anchor" href="#通过测试-正式域名访问" aria-label="Permalink to &quot;通过测试/正式域名访问&quot;">​</a></h2><p>通过配置 <strong>HOST</strong> 和 <strong>nginx</strong> 之后，将测试/正式环境下的请求转发到 <code>1</code> 启动的本地服务上。</p><p>示例如下：</p><div class="language-host"><button title="Copy Code" class="copy"></button><span class="lang">host</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">172.17.7.147   ceshi.com</span></span></code></pre></div><div class="language-conf"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">server {</span></span>
<span class="line"><span style="color:#A6ACCD;">    listen      80;</span></span>
<span class="line"><span style="color:#A6ACCD;">    server_name ceshi.com;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    location /ceshi/ {</span></span>
<span class="line"><span style="color:#A6ACCD;">     proxy_pass http://172.17.7.147:5666/;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>之后就可以通过 <code>http://localhost:5666/ceshi/#route</code> 访问到本地 dist 包所对应项目</p>`,21),p=[l];function t(c,r,i,d,C,D){return a(),n("div",null,p)}const A=s(o,[["render",t]]);export{h as __pageData,A as default};
