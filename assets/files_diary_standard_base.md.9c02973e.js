import{_ as s,c as n,o as l,e as a}from"./app.1ab11667.js";const d=JSON.parse('{"title":"🍳 项目规范配置","description":"","frontmatter":{},"headers":[{"level":2,"title":"🧊 代码规范","slug":"🧊-代码规范","link":"#🧊-代码规范","children":[]},{"level":2,"title":"🦑 eslint","slug":"🦑-eslint","link":"#🦑-eslint","children":[{"level":3,"title":"初始化配置文件","slug":"初始化配置文件","link":"#初始化配置文件","children":[]}]},{"level":2,"title":"🦐 Pritter","slug":"🦐-pritter","link":"#🦐-pritter","children":[]},{"level":2,"title":"🦞 配置 commitlint","slug":"🦞-配置-commitlint","link":"#🦞-配置-commitlint","children":[{"level":3,"title":"根目录创建 commitlint.config.js","slug":"根目录创建-commitlint-config-js","link":"#根目录创建-commitlint-config-js","children":[]}]},{"level":2,"title":"🦀 集成 husky 与 lint-staged","slug":"🦀-集成-husky-与-lint-staged","link":"#🦀-集成-husky-与-lint-staged","children":[]},{"level":2,"title":"npx 查找规则","slug":"npx-查找规则","link":"#npx-查找规则","children":[]}],"relativePath":"files/diary/standard/base.md","lastUpdated":1676026478000}'),t={name:"files/diary/standard/base.md"},e=a(`<h1 id="🍳-项目规范配置" tabindex="-1">🍳 项目规范配置 <a class="header-anchor" href="#🍳-项目规范配置" aria-hidden="true">#</a></h1><p>这对团队来说特别有帮助。这会避免你和你团队成员产生额外的心智负担，一旦你接受了如何写你的代码以及如何格式化的某些约定，</p><h2 id="🧊-代码规范" tabindex="-1">🧊 代码规范 <a class="header-anchor" href="#🧊-代码规范" aria-hidden="true">#</a></h2><blockquote><p>eslint + prettier + husky + lint-staged + commitlint</p></blockquote><h2 id="🦑-eslint" tabindex="-1">🦑 eslint <a class="header-anchor" href="#🦑-eslint" aria-hidden="true">#</a></h2><p>安装 <strong>eslint</strong> 依赖</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eslint</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save-dev</span></span>
<span class="line"></span></code></pre></div><h3 id="初始化配置文件" tabindex="-1">初始化配置文件 <a class="header-anchor" href="#初始化配置文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eslint</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--init</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">How</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">would</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ESLint?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">What</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">does</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Which</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">framework</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">does</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Does</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TypeScript?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Where</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">does</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">code</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">How</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">would</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">define</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">style</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Which</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">style</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">guide</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">want</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">follow?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">✔</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">What</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">format</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">want</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">your</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">be</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in?</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h2 id="🦐-pritter" tabindex="-1">🦐 Pritter <a class="header-anchor" href="#🦐-pritter" aria-hidden="true">#</a></h2><p>安装 <strong>prettier</strong> 依赖</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">prettier</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eslint-config-prettier</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eslint-plugin-prettier</span></span>
<span class="line"></span></code></pre></div><ul><li>eslint-config-prettier: 关闭所有不必要或可能跟 <strong>prettier</strong> 产生冲突的规则</li><li>eslint-plugin-prettier: 可以让 <strong>eslint</strong> 使用 <strong>prettier</strong> 规则进行检查</li></ul><p><strong>.eslintrc.cjs</strong> 文件中添加 <strong>extends</strong> 设置</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">extends</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        // ...</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">plugin:prettier/recommended</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>根目录下创建 <strong>.prettierrc.cjs</strong> 文件</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C3E88D;">trailingComma</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">es5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C3E88D;">tabWidth</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C3E88D;">semi</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C3E88D;">singleQuote</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="🦞-配置-commitlint" tabindex="-1">🦞 配置 commitlint <a class="header-anchor" href="#🦞-配置-commitlint" aria-hidden="true">#</a></h2><p>安装相关依赖</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/config-conventional</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><h3 id="根目录创建-commitlint-config-js" tabindex="-1">根目录创建 commitlint.config.js <a class="header-anchor" href="#根目录创建-commitlint-config-js" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">extends:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@commitlint/config-conventional</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th style="text-align:center;">platform</th><th style="text-align:center;">value</th></tr></thead><tbody><tr><td style="text-align:center;">build</td><td style="text-align:center;">编译相关的修改，例如发布版本、对项目构建或者依赖的改动</td></tr><tr><td style="text-align:center;">ci</td><td style="text-align:center;">持续集成修改</td></tr><tr><td style="text-align:center;">docs</td><td style="text-align:center;">文档修改</td></tr><tr><td style="text-align:center;">feat</td><td style="text-align:center;">新特性、新功能</td></tr><tr><td style="text-align:center;">fix</td><td style="text-align:center;">修改</td></tr><tr><td style="text-align:center;">bugperf</td><td style="text-align:center;">优化相关，比如提升性能、体验</td></tr><tr><td style="text-align:center;">refactor</td><td style="text-align:center;">代码重构</td></tr><tr><td style="text-align:center;">revert</td><td style="text-align:center;">回滚到上一个版本</td></tr><tr><td style="text-align:center;">style</td><td style="text-align:center;">代码格式修改, 注意不是 css 修改</td></tr><tr><td style="text-align:center;">test</td><td style="text-align:center;">测试用例修改</td></tr><tr><td style="text-align:center;">chore</td><td style="text-align:center;">其他修改，比如改变构建流程、或者增加依赖库、工具等</td></tr></tbody></table><h2 id="🦀-集成-husky-与-lint-staged" tabindex="-1">🦀 集成 husky 与 lint-staged <a class="header-anchor" href="#🦀-集成-husky-与-lint-staged" aria-hidden="true">#</a></h2><p>使用 <strong>mrm</strong> 集成 husky 与 lint-staged</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mrm@</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lint-staged</span></span>
<span class="line"></span></code></pre></div><p>执行命令之后，你就会看到你的 <strong>package.json</strong> 里多了一个 <strong>lint-staged</strong> 配置项，且根目录下多了一个 <strong>.husky</strong> 目录，里面就包含了 <strong>pre-commit</strong> 文件，文件里包含了一个最基础的命令：<strong>npx lint-staged</strong></p><hr><h2 id="npx-查找规则" tabindex="-1">npx 查找规则 <a class="header-anchor" href="#npx-查找规则" aria-hidden="true">#</a></h2><ol><li>去 <strong>/node_modules/.bin</strong> 目录下查找是否存在对应的命令，如果没有找到则执行第 2 步；</li><li>去 <strong>$PATH</strong> 里查找是否有对应的命令，通常在这里查找的是你全局安装的命令，如果没有找到则执行第 3 步；</li><li>创建一个临时目录，下载命令对应的依赖，然后执行这个命令，完成之后就删除这个临时目录。</li></ol><p>如果期望项目里的命令在每一个 <strong>developer</strong> 那里都能有相同的表现，建议在项目内统一安装对应的 <strong>dependency</strong>。</p>`,31),o=[e];function p(r,c,C,i,y,D){return l(),n("div",null,o)}const h=s(t,[["render",p]]);export{d as __pageData,h as default};
